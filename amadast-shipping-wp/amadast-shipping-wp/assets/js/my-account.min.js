jQuery(document).ready(function(a){const{__:i}=wp.i18n;a.fn.changeElementType=function(e){var i=[];a(this).each(function(){var n={};a.each(this.attributes,function(t,e){n[e.nodeName]=e.nodeValue});var t=a("<"+e+"/>",n).append(a(this).contents());a(this).replaceWith(t);i.push(t)});return a(i)};a(`[id$='_city']`).attr("data-placeholder",i("لطفا ابتدا استان خود را انتخاب نمایید","amadast-shipping-wp"));function c(t){const e=t.get(0);if(!e)return;if(e.tagName!=="SELECT"){t=t.changeElementType("select")}t.selectWoo({placeholder:t.attr("data-placeholder")||t.attr("placeholder")||"",width:"100%",language:{noResults:function(){return i("گزینه ای برای انتخاب وجود ندارد","amadast-shipping-wp")}}})}function o(t,e){return a.post(MY_ACCOUNT_OBJECT.request_url,t,function(t){e(t)})}function n(t){const e=a(`[id$='_city']`);const n=e.attr("id").indexOf("billing")!==-1?"billing":"shipping";e.html('<option value="0">'+i("در حال بارگذاری...","amadast-shipping-wp")+"</option>");o({action:"amdsp_checkout_load_cities",_ajax_nonce:MY_ACCOUNT_OBJECT.list_cities_nonce,state_id:t,type:n},function(t){e.html(t);if(!e.hasClass("select2-hidden-accessible")){c(e)}if(e.select2("isOpen")){c(e);e.select2("open")}}).catch(t=>{console.log(t);if(t.responseText==="-1"){if(window.confirm(i("خطا در بارگذاری شهرها؛ صفحه را رفرش کنید.","amadast-shipping-wp"))){window.location.reload()}}})}c(a("[id$='_state']"));c(a("[id$='_city']"));setTimeout(function(){a("[id$='_state']").on("change",function(t){const e=t.target.value;n(e)});if(a("[id$='_state']").val()){n(a("[id$='_state']").val())}})});