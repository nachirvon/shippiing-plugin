(function(n){n.fn.changeElementType=function(t){const e={};n.each(this[0].attributes,function(t,n){e[n.nodeName]=n.nodeValue});this.replaceWith(function(){return n("<"+t+"/>",e).append(n(this).contents())})}})(jQuery);jQuery(document).ready(function(c){const{__:n}=wp.i18n;function i(t){t.selectWoo({placeholder:t.attr("data-placeholder")||t.attr("placeholder")||"",width:"100%",language:{noResults:function(){return n("گزینه ای برای انتخاب وجود ندارد","amadast-shipping-wp")}}})}function a(t){return c.post(AMDSP_CART_OBJECT.request_url,t)}function t(){const t=c("#calc_shipping_city");const n=c("#calc_shipping_state");t.changeElementType("select");i(t);const e=n.val();if(e){o(e)}}function o(t){const e=c("#calc_shipping_city");e.val(null);e.trigger("change");e.html('<option value="0">'+n("در حال بارگذاری...","amadast-shipping-wp")+"</option>");a({action:"amdsp_checkout_load_cities",_ajax_nonce:AMDSP_CART_OBJECT.list_cities_nonce,state_id:t,type:"billing"}).then(function(t){e.html(t);const n=e.attr("value");e.val(n);e.trigger("change");if(!e.hasClass("select2-hidden-accessible"))i(e);if(e.select2("isOpen")){i(e);e.select2("open")}}).catch(t=>{if(t.responseText==="-1"){if(window.confirm(n("خطا در بارگذاری شهرها؛ صفحه را رفرش کنید.","amadast-shipping-wp"))){window.location.reload()}}})}c(document.body).on("change","#calc_shipping_state",function(t){const n=t.target.value;o(n)});i(c("#calc_shipping_state"));t();c(document.body).on("updated_wc_div",function(){t()})});